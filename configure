#!/bin/sh

echo "------------"
echo "Welcome to autographed!"
echo "Create a personal HTML signature for your mail in no time -- created by @tpanum"
echo "------------"

github_guard=("Do you have a GitHub account?" github)
github=("What's the username of your GitHub account?")
fullname=("What is your fullname?")
organization=("What is your organization?")
position_guard=("Do you want your position displayed?" position)
position=("What's your position?")
department_guard=("Are you in a department?" position)
department=("What's the name of that department?")
twitter_guard=("Do you have a Twitter account?" twitter)
twitter=("What's the username of your Twitter account?")

params=(fullname organization position_guard department_guard github_guard twitter_guard)

json_args=""

for arg in ${params[@]};
do
    var=$arg
    arg=${arg}[@]
    arg=( "${!arg}" )

    skip=false
    while [[ ${#arg[@]} -gt 1 ]]; do
        read -p "${arg[0]}" yn
            case $yn in
                [Yy]* ) var=${arg[1]}
                        arg=${arg[1]}[@]
                        arg=( "${!arg}" );;
                [Nn]* ) skip=true
                        break;;
                * ) echo "Please answer yes or no.";;
            esac
    done

    if [[ $skip == false ]]; then
        json_args="$json_args${var} "
        read -p "${arg[0]}" $var
    fi
done

json="{"
for arg in $json_args;
do
    json="$json \"$arg\":\"${!arg}\","
done
json=$(echo $json | sed s/.$//)
json="$json }"

echo "$json"


 exit